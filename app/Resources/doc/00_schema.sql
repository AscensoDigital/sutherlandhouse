CREATE SEQUENCE tag_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE comment_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE post_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE TABLE promocion (id SERIAL NOT NULL, modificador_id INT DEFAULT NULL, nombre VARCHAR(255) NOT NULL, template VARCHAR(255) DEFAULT NULL, fecha_inicio TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, fecha_termino TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, portada BOOLEAN NOT NULL, opcion_1_nombre VARCHAR(255) DEFAULT NULL, opcion_2_nombre VARCHAR(255) DEFAULT NULL, updated_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, slug VARCHAR(255) NOT NULL, url VARCHAR(255) DEFAULT NULL, fecha DATE DEFAULT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_CD312F7989D9B62 ON promocion (slug);
CREATE INDEX IDX_CD312F74C7F0C30 ON promocion (modificador_id);
CREATE TABLE usuario (id SERIAL NOT NULL, username VARCHAR(180) NOT NULL, username_canonical VARCHAR(180) NOT NULL, email VARCHAR(180) NOT NULL, email_canonical VARCHAR(180) NOT NULL, enabled BOOLEAN NOT NULL, salt VARCHAR(255) DEFAULT NULL, password VARCHAR(255) NOT NULL, last_login TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, confirmation_token VARCHAR(180) DEFAULT NULL, password_requested_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, roles TEXT NOT NULL, full_name VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_2265B05D92FC23A8 ON usuario (username_canonical);
CREATE UNIQUE INDEX UNIQ_2265B05DA0D96FBF ON usuario (email_canonical);
CREATE UNIQUE INDEX UNIQ_2265B05DC05FB297 ON usuario (confirmation_token);
COMMENT ON COLUMN usuario.roles IS '(DC2Type:array)';
CREATE TABLE page_carousel (id SERIAL NOT NULL, carousel_tipo_id INT DEFAULT NULL, promocion_id INT DEFAULT NULL, modificador_id INT DEFAULT NULL, pagina VARCHAR(100) DEFAULT NULL, orden INT NOT NULL, url VARCHAR(255) NOT NULL, caption_text TEXT DEFAULT NULL, activo BOOLEAN NOT NULL, updated_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, titulo VARCHAR(150) DEFAULT NULL, link VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_9D484020CB88BB42 ON page_carousel (carousel_tipo_id);
CREATE INDEX IDX_9D484020B1E453D4 ON page_carousel (promocion_id);
CREATE INDEX IDX_9D4840204C7F0C30 ON page_carousel (modificador_id);
CREATE TABLE carousel_tipo (id SERIAL NOT NULL, nombre VARCHAR(15) NOT NULL, template VARCHAR(50) NOT NULL, PRIMARY KEY(id));
CREATE TABLE tarifa (id SERIAL NOT NULL, temporada_id INT DEFAULT NULL, habitacion_tipo_id INT DEFAULT NULL, modificador_id INT DEFAULT NULL, peso_semana INT DEFAULT NULL, peso_finde INT DEFAULT NULL, dolar_semana INT DEFAULT NULL, dolar_finde INT DEFAULT NULL, updated_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_A01B5DE6E1CF8A8 ON tarifa (temporada_id);
CREATE INDEX IDX_A01B5DEB19CB347 ON tarifa (habitacion_tipo_id);
CREATE INDEX IDX_A01B5DE4C7F0C30 ON tarifa (modificador_id);
CREATE UNIQUE INDEX tarifa_temporada_id_habitacion_tipo_id_key ON tarifa (temporada_id, habitacion_tipo_id);
CREATE TABLE temporada (id SERIAL NOT NULL, modificador_id INT DEFAULT NULL, nombre VARCHAR(255) NOT NULL, activa BOOLEAN NOT NULL, updated_at TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_9A6BDEBD4C7F0C30 ON temporada (modificador_id);
CREATE TABLE habitacion_tipo (id SERIAL NOT NULL, nombre VARCHAR(200) NOT NULL, PRIMARY KEY(id));
CREATE TABLE promocion_x_habitacion (id SERIAL NOT NULL, promocion_id INT DEFAULT NULL, habitacion_id INT DEFAULT NULL, vendida BOOLEAN NOT NULL, peso_opcion_1 INT DEFAULT NULL, peso_opcion_2 INT DEFAULT NULL, dolar_opcion_1 INT DEFAULT NULL, dolar_opcion_2 INT DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_F412C57EB1E453D4 ON promocion_x_habitacion (promocion_id);
CREATE INDEX IDX_F412C57EB009290D ON promocion_x_habitacion (habitacion_id);
CREATE TABLE habitacion (id SERIAL NOT NULL, habitacion_tipo_id INT DEFAULT NULL, nombre VARCHAR(50) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_F45995BAB19CB347 ON habitacion (habitacion_tipo_id);
CREATE TABLE faq (id SERIAL NOT NULL, modificador_id INT DEFAULT NULL, pregunta TEXT NOT NULL, respuesta TEXT NOT NULL, orden INT NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_E8FF75CC4C7F0C30 ON faq (modificador_id);
CREATE TABLE tag (id INT NOT NULL, name VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_389B7835E237E06 ON tag (name);
CREATE TABLE comment (id INT NOT NULL, post_id INT NOT NULL, author_id INT NOT NULL, content TEXT NOT NULL, published_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_9474526C4B89032C ON comment (post_id);
CREATE INDEX IDX_9474526CF675F31B ON comment (author_id);
CREATE TABLE post (id INT NOT NULL, author_id INT NOT NULL, title VARCHAR(255) NOT NULL, slug VARCHAR(255) NOT NULL, summary VARCHAR(255) NOT NULL, content TEXT NOT NULL, published_at TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_5A8A6C8DF675F31B ON post (author_id);
CREATE TABLE symfony_demo_post_tag (post_id INT NOT NULL, tag_id INT NOT NULL, PRIMARY KEY(post_id, tag_id));
CREATE INDEX IDX_6ABC1CC44B89032C ON symfony_demo_post_tag (post_id);
CREATE INDEX IDX_6ABC1CC4BAD26311 ON symfony_demo_post_tag (tag_id);
ALTER TABLE promocion ADD CONSTRAINT FK_CD312F74C7F0C30 FOREIGN KEY (modificador_id) REFERENCES usuario (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE page_carousel ADD CONSTRAINT FK_9D484020CB88BB42 FOREIGN KEY (carousel_tipo_id) REFERENCES carousel_tipo (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE page_carousel ADD CONSTRAINT FK_9D484020B1E453D4 FOREIGN KEY (promocion_id) REFERENCES promocion (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE page_carousel ADD CONSTRAINT FK_9D4840204C7F0C30 FOREIGN KEY (modificador_id) REFERENCES usuario (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE tarifa ADD CONSTRAINT FK_A01B5DE6E1CF8A8 FOREIGN KEY (temporada_id) REFERENCES temporada (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE tarifa ADD CONSTRAINT FK_A01B5DEB19CB347 FOREIGN KEY (habitacion_tipo_id) REFERENCES habitacion_tipo (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE tarifa ADD CONSTRAINT FK_A01B5DE4C7F0C30 FOREIGN KEY (modificador_id) REFERENCES usuario (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE temporada ADD CONSTRAINT FK_9A6BDEBD4C7F0C30 FOREIGN KEY (modificador_id) REFERENCES usuario (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE promocion_x_habitacion ADD CONSTRAINT FK_F412C57EB1E453D4 FOREIGN KEY (promocion_id) REFERENCES promocion (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE promocion_x_habitacion ADD CONSTRAINT FK_F412C57EB009290D FOREIGN KEY (habitacion_id) REFERENCES habitacion (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE habitacion ADD CONSTRAINT FK_F45995BAB19CB347 FOREIGN KEY (habitacion_tipo_id) REFERENCES habitacion_tipo (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE faq ADD CONSTRAINT FK_E8FF75CC4C7F0C30 FOREIGN KEY (modificador_id) REFERENCES usuario (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE comment ADD CONSTRAINT FK_9474526C4B89032C FOREIGN KEY (post_id) REFERENCES post (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE comment ADD CONSTRAINT FK_9474526CF675F31B FOREIGN KEY (author_id) REFERENCES usuario (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE post ADD CONSTRAINT FK_5A8A6C8DF675F31B FOREIGN KEY (author_id) REFERENCES usuario (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE symfony_demo_post_tag ADD CONSTRAINT FK_6ABC1CC44B89032C FOREIGN KEY (post_id) REFERENCES post (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE symfony_demo_post_tag ADD CONSTRAINT FK_6ABC1CC4BAD26311 FOREIGN KEY (tag_id) REFERENCES tag (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
